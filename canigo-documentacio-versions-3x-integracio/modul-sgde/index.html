<!DOCTYPE html>
<html xml:lang="ca-ES" lang="ca-ES" xmlns="http://www.w3.org/1999/xhtml">
<head>

	<title>SGDE</title>
		<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
	<link href="/css/master.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/canigo.css" rel="stylesheet" type="text/css" />
	<script src="/js/jquery.min.js" type="text/javascript"></script>

	<script>
		document.write("<meta name=\"titol\" content=\"SGDE\" />");
		document.write("<meta name=\"description\" content=\"Servei de Gestió del Document Electrònic.\" />");
	</script>

	

</head>
<body class="single">
	<div class="contenidor unfixed">

				

		<header class="fons_header navbar navbar-default z-index-menu">
			<div class="container" role="menu">
				<div class="row clearfix menuNav">
					<div class="col-md-3 col-xs-3 column visible-xs coloca ">
						<button type="button" onclick="amunt();" title="Menu"
							class="navbar-toggle pull-left" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
					</div>

					<div class="col-md-3 col-xs-6 col-offset-2 column visible-xs titol-mobil">
						
						<span class="white titol-mobil-destacat">canigo.ctti</span><span class="white">.gencat.cat</span>
					</div>

					<div class="col-md-3 col-xs-3 column visible-xs coloca1">
						<button onclick="amunt();" type="button" title="Cerca"
							class="ico_cerca " data-toggle="collapse" data-target=".dos">
						</button>
					</div>

				</div>

				<div class="collapse dos">
					<div class="shadowBox">
						<form class="navbar-form navbar-left primer" action="/cercador/" method="get"
 						onsubmit="location.href=this.action+'?q='+this.cerca_cap.value; return false;">
							<div class="form-group">
								<input type="search" class="form-control" name="q" id="cerca_cap"
									title="Cerca"
									placeholder="Cerca" />
								<button type="button" title="Neteja" class="btn btn-default"></button>
								<input type="submit" class="ocult" name="Cerca" value="Cerca" />
							</div>
						</form>
					</div>
				</div>	

				<nav class="collapse navbar-collapse navbar-ex1-collapse ">
				
					<div class="row">
						<div class="col-md-6 col-sm-4 column">
							<a class="img-responsive logo" title="Generalitat de Catalunya"
								href="http://ctti.gencat.cat/">gencat.cat</a>
							<button class="menu_tancar visible-xs collapsed"
								data-target=".navbar-collapse" data-toggle="collapse"
								title="Tancar"></button>
						</div>

						<div class="col-md-6 col-sm-8 column hidden-xs hidden-mg">
							<form class="navbar-form cercador_vermell hidden-xs pull-right" action="/cercador/"  method="get" onsubmit="location.href=this.action+'?q='+this.cerca2.value; return false;">
								<div class="form-group">
									<label class="hidden" for="cerca2">Cerca</label>
									<input id="cerca2" class="form-control" type="search" 
									placeholder="Cerca" name="q" title="Cerca">
									<input class="btn btn-default" type="submit" title="Cerca" value="">
								</div>
							</form>

							

						</div>

					</div>
					<div class="col-xs-12 hidden-xs" id="nomPortal">
                    	<span class="titol-cap-nou">Arquitectura CTTI</span>
                    </div>					
					<ul class="nav navbar-nav">

			        	

						<li>
							<a target='_self' class="dropdown-toggle" href='/' data-toggle='_dropdown'>Inici</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/principis/' data-toggle='_dropdown'>Principis d&#39;arquitectura</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/bloc/' data-toggle='_dropdown'>Bloc</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/cloud/' data-toggle='_dropdown'>Cloud</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/canigo/' data-toggle='_dropdown'>Canigó</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/sic/' data-toggle='_dropdown'>SIC</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/sgde/' data-toggle='_dropdown'>SGDE</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/gicar/' data-toggle='_dropdown'>GICAR</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/cs/' data-toggle='_dropdown'>Centres de Suport</a>
						</li>

						

					</ul>

				</nav>
			</div>
		</header>



	</div>

	<section class="border-start">

						
			

			<article class="bgGrey">
				<div class="container">	
					<div class="row">
						<div class="capcelera_basica col-sm-12">
							<div class="capcelera_basica_cont">
								<ol class="breadcrumb filariana hidden-xs">
									<li>
										<a href="/">Inici</a>
									</li>
									<li class="breadcrumbs2">
									
										<a href="/canigo-documentacio-versions-3x-integracio">
											




















										</a>
										


















	<a href="/canigo/">Framework Canigó</a> </li>
	<li>
		<a href="/canigo-documentacio/">Documentació</a>
	</li>

	<li>
		<a href="/canigo-documentacio-versions/">Versions</a>
	</li>
	
	<li>
		<a href="/canigo-documentacio-versions-3x">Versió 3.x</a>
	</li>

	<li>
		
			<a href="/canigo-documentacio-versions-3x-integracio">Mòduls d'Integració</a>
		





































									
									</li>
									
									<li>
										SGDE
									</li>
									

								</ol>

								<h1 class="capcelera_flotant pull-left" data-txt=".title">
									
										SGDE
									
								</h1>

								

								
								
									
								

																	

							</div>
						</div>

					</div>
				</div>
			</article>

			
			<article class="padding-xs padding-sm padding-md contingut">				
				<div class="container">
 		
					
				

	


					

						

<h2 id="introducció:e9894f63ac3d2fe3c0e572950235d775">Introducció</h2>

<p>L&rsquo;SGDE o Servei de Gestió del Document Electrònic ofereix una sèrie de serveis relacionats amb la gestió de documents electrònics. Aquests serveis els ofereixen les plataformes que integren l&rsquo;SGDE. Actualment existeixen dues:</p>

<ul>
<li>Plataforma Adobe</li>
<li>STD</li>
</ul>

<p>Podeu trobar mes informació sobre els serveis i funcionalitats del SGDE <a href="/sgde/about/">aquí</a>.</p>

<h3 id="propòsit:e9894f63ac3d2fe3c0e572950235d775">Propòsit</h3>

<p>El propòsit del connector és proporcionar una API que pugui ser utilitzada de forma fàcil pels integradors d&rsquo;aquest connector per consumir els diferents serveis del SGDE.</p>

<h3 id="context-i-escenaris-d-ús:e9894f63ac3d2fe3c0e572950235d775">Context i Escenaris d&rsquo;ús</h3>

<p>El connector SGDE es troba dins els connectors funcionals de la Generalitat.</p>

<h3 id="a-qui-va-dirigit:e9894f63ac3d2fe3c0e572950235d775">A qui va dirigit</h3>

<p>Aquest document va dirigit als següents perfils:</p>

<ul>
<li>Programador. Per conèixer l&rsquo;ús del connector.</li>
<li>Arquitecte. Per conèixer quins són els components i la configuració del connector.</li>
</ul>

<h2 id="descripció-detallada:e9894f63ac3d2fe3c0e572950235d775">Descripció Detallada</h2>

<p>Aquest connector ofereix els següents serveis:</p>

<p><strong>Serveis Plataforma Adobe</strong></p>

<ul>
<li><strong>renderitzarFormulari:</strong> Fusiona un formulari amb la plantilla pdf.</li>
<li><strong>renderitzarSignarPDF:</strong> Fusiona un formulari amb la plantilla pdf i posteriorment el signa.</li>
<li><strong>renderitzarFormulariPDFadjunts:</strong> Fusiona un formulari amb la plantilla pdf i afegeix els annexos indicats</li>
<li><strong>renderitzarFormulariPDFaplanatForms:</strong> Fusiona un formulari amb la plantilla pdf donant com a resultat un PDF aplanat. Realitzat amb el mòdul Forms de LC.</li>
<li><strong>renderitzarFormulariPDFAplanat:</strong> Fusiona un formulari amb la plantilla pdf donant com a resultat un PDF aplanat. Realitzat amb el mòdul d&rsquo;Output de LC.</li>
<li><strong>renderitzarFormulariPDFA:</strong> Fusiona un formulari amb la plantilla pdf donant com a resultat un PDF/A, que garanteix la compatibilitat d’aquest document al llarg del temps.</li>
<li><strong>renderitzarFormulariPDFaplanatSignat:</strong> Fusiona un formulari amb la plantilla pdf, després l&rsquo;aplana i el signa.</li>
<li><strong>extreureDadesFormulari:</strong> Servei per extreure dades d&rsquo;un formulari.</li>
<li><strong>extreureDadesXML:</strong> Servei que extreu les dades introduïdes en un formulari dinàmic.</li>
<li><strong>extreureComentaris:</strong> Servei que extreu els comentaris d&rsquo;un document PDF.</li>
<li><strong>extreureComplexAnnexos:</strong> Servei que extreu els annexos d&rsquo;un document PDF.</li>
<li><strong>extreureAnnexos:</strong> Servei que extreu els annexos d&rsquo;un document PDF.</li>
<li><strong>convertirPdfaImatge:</strong> Servei per convertir un pdf a imatge.</li>
<li><strong>convertirPdfaPdfA:</strong> Servei per convertir un PDF a PDF/A.</li>
<li><strong>aplanarPDF:</strong> Servei per aplanar un pdf.</li>
<li><strong>signarPDF:</strong> Servei per a signar un pdf pla.</li>
<li><strong>aplanarSignarPDF:</strong> Servei per aplanar i signar un pdf.</li>
</ul>

<p><strong>Serveis STD</strong></p>

<ul>
<li><strong>generarCSV:</strong> Servei per la generació d&rsquo;un Codi Segur a partir d&rsquo;un arxiu i una clau.</li>
<li><strong>composarPDFStream:</strong> Servei que composa un PDF a partir d&rsquo;una plantilla i d&rsquo;un document PDF enviat en Stream en la mateixa petició.</li>
<li><strong>composarPDFRemot:</strong> Servei que composa un PDF a partir d&rsquo;una plantilla i d&rsquo;un document PDF previament pujat al filesystem del STD.</li>
<li><strong>convertirPDF:</strong> Servei que converteix un document Ofimàtic (Word, Excel, PowerPoint, Imatges, OpenOffice,&hellip;) en PDF.</li>
<li><strong>convertirPDFCercable:</strong> Servei que converteix un document Ofimàtic (Word, Excel, PowerPoint, Imatges, OpenOffice,&hellip;) en PDF Cercable.</li>
<li><strong>convertirComposarPDF:</strong> Servei que converteix i posteriorment composa un arxiu ofimàtic.</li>
<li><strong>convertirComposarPDFCercable:</strong> Servei que converteix i posteriorment composa un arxiu ofimàtic cercable.</li>
<li><strong>ferOCR:</strong> Servei que extrau el text inclòs a una imatge i el retorna.</li>
</ul>

<h3 id="alta-servei:e9894f63ac3d2fe3c0e572950235d775">Alta Servei</h3>

<p>Per poder utilitzar l&rsquo;SGDE s&rsquo;ha d&rsquo;estar donat d&rsquo;alta en el servei. Per poder fer-ho s&rsquo;han d&rsquo;enviar un mail a oficina-tecnica.canigo.ctti@gencat.cat sol.licitant l&rsquo;alta a qualsevol de les plataformes que integren el SGDE:</p>

<ul>
<li>Plataforma Adobe: El mail a de contenir la sol·licitud d&rsquo;alta a l&rsquo;aplicació d&rsquo;AutoServei disponible <a href="/related/SGDE/formulari-alta-plataforma-adobe.xls" title="Formulari d'alta plataforma Adobe del SGDE">aqui</a>.</li>
<li>STD: El mail ha de redactar-se tal qual es descriu en el manual d&rsquo;usuari del servei. Aquest mail ha de contenir una plantilla degudament complimentada que es pot trobar aquí.

<ol>
<li>El Centre de Frameworks i Solucions d&rsquo;Arquitectura respondrà a aquest mail una vegada doni d&rsquo;alta l&rsquo;aplicació amb un mail tipus,</li>
<li>L&rsquo;alta a qualsevol de les dues plataformes s&rsquo;han de realitzar primer sobre l&rsquo;entorn de PRE i posteriorment a l&rsquo;entorn de PRO.</li>
</ol></li>
</ul>

<h3 id="arquitectura-i-components:e9894f63ac3d2fe3c0e572950235d775">Arquitectura i Components</h3>

<h4 id="interfícies-i-components-genèrics:e9894f63ac3d2fe3c0e572950235d775">Interfícies i Components Genèrics</h4>

<p>Es pot trobar el codi font referent a aquest components a la següent url:</p>

<p>Codi Font:  <a href="http://repos.canigo.ctti.gencat.cat/repository/maven2/cat/gencat/ctti/canigo.integration.sgde/1.2.0/">http://repos.canigo.ctti.gencat.cat/repository/maven2/cat/gencat/ctti/canigo.integration.sgde/1.2.0/</a></p>

<h4 id="requeriments:e9894f63ac3d2fe3c0e572950235d775">Requeriments</h4>

<p>El connector SGDE és compatible amb les versions 1.5 o superior de Java. Per versions inferiors no es garantit el seu correcte funcionament.</p>

<p>El seu ús esta certificat per funcionar correctament en servidors d&rsquo;aplicacions WL11g i Tomcat6.x.</p>

<h3 id="instal-lació-i-configuració:e9894f63ac3d2fe3c0e572950235d775">Instal.lació i Configuració</h3>

<h4 id="instal-lació:e9894f63ac3d2fe3c0e572950235d775">Instal.lació</h4>

<p>La instal.lació del connector requereix de la utilització de la llibreria &lsquo;canigo.integration.sgde&rsquo; i les dependències indicades a l&rsquo;apartat &lsquo;Introducció-Versions i Dependències&rsquo;.</p>

<p>Per afegir aquesta dependència s&rsquo;ha de modificar el pom.xml de l&rsquo;aplicació per incloure les llibreries del Connector.</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;cat.gencat.ctti&lt;/groupId&gt;
    &lt;artifactId&gt;canigo.integration.sgde&lt;/artifactId&gt;
    &lt;version&gt;1.2.0&lt;/version&gt;
&lt;/dependency&gt;

</code></pre>

<p>IMPORTANT</p>

<p>En el cas de que es vulgui integrar aquest connector en una aplicació que disposi del connector de la PICA, és farà necessari afegir les següents exclusions en aquests últim, per exemple el connector PADRÒ.</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;cat.gencat.ctti&lt;/groupId&gt;
    &lt;artifactId&gt;canigo.integration.padro.pica&lt;/artifactId&gt;
    &lt;version&gt;1.2.0&lt;/version&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.apache.axis2&lt;/groupId&gt;
            &lt;artifactId&gt;axis2-jaxws&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.apache.woden&lt;/groupId&gt;
            &lt;artifactId&gt;woden&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.apache.ws.commons.schema&lt;/groupId&gt;
            &lt;artifactId&gt;XmlSchema&lt;/artifactId&gt;
        /exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;
</code></pre>

<p>El no afegir aquestes exclusions pot provocar que el connector SGDE no funcioni correctament.</p>

<h4 id="configuració:e9894f63ac3d2fe3c0e572950235d775">Configuració</h4>

<p>1.- Per poder configurar el connector SGDE és necessari crear un arxiu anomenat app-integration-sgde.xml situat en src/main/resources/spring/ amb el següent contingut:</p>

<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-4.1.xsd&quot;&gt;
    &lt;!-- BEAN SGDE --&gt;
    &lt;bean id=&quot;sgdeService&quot; class=&quot;cat.gencat.ctti.canigo.arch.integration.sgde.impl.SGDEServiceImpl&quot; init-method=&quot;setupService&quot; scope=&quot;prototype&quot;&gt;
        &lt;description&gt;
            SGDE implementation:
                - formsWSDLUrl: Url de l'wsdl del servei de formularis per les operacions de: renderitzar, extracció de dades, aplanat, ...
                - stdWSDLUrl: Url de l'wsdl del servei de Transformació de Documents(STD)
        &lt;/description&gt;
        &lt;property name=&quot;formsWSDLUrl&quot; value=&quot;${sgde.forms.wsdl.url:http://eformularis.pre.intranet.gencat.cat/ServeisInvocacio/serveis/ServeisInvocacioV2?wsdl}&quot; /&gt;
        &lt;property name=&quot;stdWSDLUrl&quot; value=&quot;${sgde.std.wsdl.url:http://sgde.pre.intranet.gencat.cat/ServeisInvocacioSTD/services/ServeisSTDV2?wsdl}&quot; /&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre>

<p>on les variables <strong>sgde.forms.wsdl.url</strong> i <strong>sgde.std.wsdl.url</strong> són recuperades de l&rsquo;arxiu <strong>sgde.properties</strong> que s&rsquo;ha de crear en src/main/resources/config/props/sgde.properties</p>

<p>2.- Configuració dels arxius de properties.</p>

<p>Només es necessita un arxiu de properties a configurar el sgde.properties.</p>

<p>El primer conté només dos paràmetres,</p>

<p><strong>sgde.forms.wsdl.url:</strong> Url del WSDL del servei de formularis Adobe.</p>

<ul>
<li>PRE: <a href="http://eformularis.pre.intranet.gencat.cat/ServeisInvocacio/serveis/ServeisInvocacioV2?wsdl">http://eformularis.pre.intranet.gencat.cat/ServeisInvocacio/serveis/ServeisInvocacioV2?wsdl</a></li>
<li>PRO: <a href="http://eformularis.intranet.gencat.cat/ServeisInvocacio/serveis/ServeisInvocacioV2?wsdl">http://eformularis.intranet.gencat.cat/ServeisInvocacio/serveis/ServeisInvocacioV2?wsdl</a></li>
</ul>

<p><strong>sgde.std.wsdl.url:</strong> Url del WSDL del STD.</p>

<ul>
<li>PRE: <a href="http://sgde.pre.intranet.gencat.cat/ServeisInvocacioSTD/services/ServeisSTDV2?wsdl">http://sgde.pre.intranet.gencat.cat/ServeisInvocacioSTD/services/ServeisSTDV2?wsdl</a></li>
<li>PRO: <a href="http://sgde.intranet.gencat.cat/ServeisInvocacioSTD/services/ServeisSTDV2?wsdl">http://sgde.intranet.gencat.cat/ServeisInvocacioSTD/services/ServeisSTDV2?wsdl</a></li>
</ul>

<h3 id="utilització-del-connector:e9894f63ac3d2fe3c0e572950235d775">Utilització del Connector</h3>

<p>1.- En el bean on es vulgui disposar dels serveis del connector declarar el servei.</p>

<pre><code class="language-java">@Autowired
private ISGDEService sgdeService;
</code></pre>

<p>2.- Escollir un dels serveis del SGDE, per exemple el de CSV.</p>

<pre><code class="language-java">ResultSTD res = null;
byte[] STD_ARXIU_PDF_TEST1 = null;
try {
    STD_ARXIU_PDF_TEST1 = IOUtils.toByteArray(Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;data_sgde/prueba_composar.pdf&quot;));
    res = sgdeService.generarCSV(&quot;ctti&quot;, &quot;cscanigo&quot;, STD_ARXIU_PDF_TEST1, &quot;cscanigo&quot;);
    log.info(&quot;[SGDEConnectorService][sgdeGeneracioCSVTest][estat: &quot; + res.getStatus().intValue() + &quot;]&quot;);
} catch (Exception e) {
    e.printStackTrace();
}
</code></pre>

<p>Per més informació sobre els diferents serveis que ofereix el SGDE consultar la documentació disponible <a href="/sgde/documentacio/">aquí</a>.</p>


					

					
				</div>	

			</article>	


	</section>	

		<div class="fons_footer ">
		<footer class="container center-block shadowBox2">
			<div class="shadow2"></div>
			<div class="row footer_tab_ord">

				<div class="footer_tab_bot col-sm-12">
					<div class="avis_legal">

						<div id="fAvisLegal">
							<div>
								<div class="hidden-xs">
									<a href="http://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" alt="www.gencat.cat"
										/></a>
									<p>
										<a title="Avis legal" href="http://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								<div class="visible-xs avis_legal">
									<p>
										<a title="Avis legal" href="http://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								
								<div class="fi_peu visible-xs">
									<a title="www.gencat.cat" href="http://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" 
										alt="www.gencat.cat" /></a> <a class="torna_amunt pull-right"
										href=" javascript:tornarAmunt();" title="Torna amunt">
										<p>Torna amunt</p>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

<script src="/js/master.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<script src="/js/custom.js" type="text/javascript"></script>



<script type="text/javascript">

if(location.hostname!=="localhost"){

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', "UA-59408075-1", 'auto');
	ga('send', 'pageview', {
	  	'page': location.pathname + location.search  + location.hash
	  }
	);

}

</script>



</body>
</html>
