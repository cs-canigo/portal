<!DOCTYPE html>
<html xml:lang="ca-ES" lang="ca-ES" xmlns="http://www.w3.org/1999/xhtml">
<head>

	<title>Cloud-Ready</title>
		<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
	<link href="/css/master.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/canigo.css" rel="stylesheet" type="text/css" />
	<script src="/js/jquery.min.js" type="text/javascript"></script>

	<script>
		document.write("<meta name=\"titol\" content=\"Cloud-Ready\" />");
		document.write("<meta name=\"description\" content=\"Aspectes a tenir en compte en la definició de l\x27arquitectura d\x27una aplicació per estar preparada per anar al Cloud\" />");
	</script>

	

</head>
<body class="single">
	<div class="contenidor unfixed">

				

		<header class="fons_header navbar navbar-default z-index-menu">
			<div class="container" role="menu">
				<div class="row clearfix menuNav">
					<div class="col-md-3 col-xs-3 column visible-xs coloca ">
						<button type="button" onclick="amunt();" title="Menu"
							class="navbar-toggle pull-left" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
					</div>

					<div class="col-md-3 col-xs-6 col-offset-2 column visible-xs titol-mobil">
						
						<span class="white titol-mobil-destacat">canigo.ctti</span><span class="white">.gencat.cat</span>
					</div>

					<div class="col-md-3 col-xs-3 column visible-xs coloca1">
						<button onclick="amunt();" type="button" title="Cerca"
							class="ico_cerca " data-toggle="collapse" data-target=".dos">
						</button>
					</div>

				</div>

				<div class="collapse dos">
					<div class="shadowBox">
						<form class="navbar-form navbar-left primer" action="/cercador/" method="get"
 						onsubmit="location.href=this.action+'?q='+this.cerca_cap.value; return false;">
							<div class="form-group">
								<input type="search" class="form-control" name="q" id="cerca_cap"
									title="Cerca"
									placeholder="Cerca" />
								<button type="button" title="Neteja" class="btn btn-default"></button>
								<input type="submit" class="ocult" name="Cerca" value="Cerca" />
							</div>
						</form>
					</div>
				</div>	

				<nav class="collapse navbar-collapse navbar-ex1-collapse ">
				
					<div class="row">
						<div class="col-md-6 col-sm-4 column">
							<a class="img-responsive logo" title="Generalitat de Catalunya"
								href="http://ctti.gencat.cat/">gencat.cat</a>
							<button class="menu_tancar visible-xs collapsed"
								data-target=".navbar-collapse" data-toggle="collapse"
								title="Tancar"></button>
						</div>

						<div class="col-md-6 col-sm-8 column hidden-xs hidden-mg">
							<form class="navbar-form cercador_vermell hidden-xs pull-right" action="/cercador/"  method="get" onsubmit="location.href=this.action+'?q='+this.cerca2.value; return false;">
								<div class="form-group">
									<label class="hidden" for="cerca2">Cerca</label>
									<input id="cerca2" class="form-control" type="search" 
									placeholder="Cerca" name="q" title="Cerca">
									<input class="btn btn-default" type="submit" title="Cerca" value="">
								</div>
							</form>

							

						</div>

					</div>
					<div class="col-xs-12 hidden-xs" id="nomPortal">
                    	<span class="titol-cap-nou">Arquitectura CTTI</span>
                    </div>					
					<ul class="nav navbar-nav">

			        	

						<li>
							<a target='_self' class="dropdown-toggle" href='/' data-toggle='_dropdown'>Inici</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/principis' data-toggle='_dropdown'>Principis d&#39;arquitectura</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/bloc' data-toggle='_dropdown'>Bloc</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/cloud' data-toggle='_dropdown'>Cloud</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/canigo' data-toggle='_dropdown'>Canigó</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/sic' data-toggle='_dropdown'>SIC</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/sgde' data-toggle='_dropdown'>SGDE</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/gicar' data-toggle='_dropdown'>GICAR</a>
						</li>

						

						<li>
							<a target='_self' class="dropdown-toggle" href='/cs' data-toggle='_dropdown'>Centres de Suport</a>
						</li>

						

					</ul>

				</nav>
			</div>
		</header>



	</div>

	<section class="border-start">

						
			

			<article class="bgGrey">
				<div class="container">	
					<div class="row">
						<div class="capcelera_basica col-sm-12">
							<div class="capcelera_basica_cont">
								<ol class="breadcrumb filariana hidden-xs">
									<li>
										<a href="/">Inici</a>
									</li>
									<li class="breadcrumbs2">
									
										<a href="/bloc">
											











	Bloc d'Arquitectura










										</a>
										





















































									
									</li>
									
									<li>
										Cloud-Ready
									</li>
									

								</ol>

								<h1 class="capcelera_flotant pull-left" data-txt=".title">
									
										Cloud-Ready
									
								</h1>

								

								
								
									
								

																	

							</div>
						</div>

					</div>
				</div>
			</article>

			
			<article class="padding-xs padding-sm padding-md contingut">				
				<div class="container">
 		
					
				

	


					

						

<p>Per tal que una aplicació pugui ser desplegada al <strong>Cloud</strong> i s&rsquo;aprofiti dels beneficis que aquest aporta, cal que hagi estat dissenyada amb aquesta finalitat. Aquest disseny, normalment, és més complex que el disseny que es pugui realitzar per una aplicació destinada a ser desplegada en servidors &ldquo;on-premise&rdquo;. Són molts els avantatges d&rsquo;un entorn Cloud (flexibilitat, agilitat en aprovisionament, facilitat per desplegament continu,&hellip;) que fan que l&rsquo;esforç en la <strong>definició de l&rsquo;arquitectura</strong> valgui la pena.</p>

<p>A continuació s&rsquo;enumeren diferents conceptes a tenir en compte en el disseny d&rsquo;una aplicació que vulgui estar preparada per anar al Cloud:</p>

<h2 id="conceptes">Conceptes</h2>

<h3 id="micro-serveis-img-src-images-bloc-cloud-ready-microservices-png-alt-microserveis-style-width-80px">Micro-serveis <img src="/images/bloc/cloud-ready-microservices.png" alt="Microserveis" style="width: 80px;"/></h3>

<p>L&rsquo;aplicació ha de ser concebuda com una <strong>col·lecció de serveis</strong>, no com a una única peça (monòlit). Més informació en aquesta <a href="/bloc/2016/08/microserveis/">entrada</a> d&rsquo;aquest mateix bloc.</p>

<h3 id="escalabilitat-img-src-images-bloc-cloud-ready-scalability-png-alt-escalabilitat-style-width-80px">Escalabilitat <img src="/images/bloc/cloud-ready-scalability.png" alt="Escalabilitat" style="width: 80px;"/></h3>

<p>Una arquitectura orientada a micro-serveis permetrà l&rsquo;<strong>escalabilitat de cada servei per separat</strong>. Els entorns Cloud estan dissenyats per aprovisionar molts entorns d&rsquo;execució petits (contenidors, paas, &hellip;). Per tant, les arquitectures orientades a micro-serveis són de forma natural fàcilment integrables en entorns Cloud.</p>

<p>L&rsquo;escalabilitat permetrà canviar el nombre d&rsquo;instàncies de l&rsquo;aplicació segons les necessitats. És important que l&rsquo;aplicació sigui el més &ldquo;stateless&rdquo; possible ja que d&rsquo;aquesta manera serà molt més fàcil d&rsquo;escalar.</p>

<p>L&rsquo;aplicació ha d&rsquo;estar preparada per aturar-se i reiniciar-se sempre que calgui, aturant nodes quan la càrrega sigui petita o incrementant-ne quan hi hagi un pic de consum.</p>

<h3 id="agnòstic-de-la-infraestructura-img-src-images-bloc-cloud-ready-infraestructure-agnostic-png-alt-agnòstic-de-la-infraestructura-style-width-70px">Agnòstic de la infraestructura <img src="/images/bloc/cloud-ready-infraestructure-agnostic.png" alt="Agnòstic de la infraestructura" style="width: 70px;"/></h3>

<p>L&rsquo;aplicació <strong>no ha d&rsquo;estar lligada a cap element de la infraestructura</strong> on hagi de ser desplegada. D&rsquo;aquesta manera, si l&rsquo;aplicació ha de traslladar-se d&rsquo;una infraestructura a una altra de diferent, no es veurà afectada. Per exemple, no ha d&rsquo;utilitzar IPs, o tenir en compte el número de instàncies de l&rsquo;aplicació. Tampoc hauria de tenir funcionalitats dependents d&rsquo;un sistema operatiu concret.</p>

<h3 id="robustesa-img-src-images-bloc-cloud-ready-fault-tolerance-png-alt-robustesa-style-width-50px">Robustesa <img src="/images/bloc/cloud-ready-fault-tolerance.png" alt="Robustesa" style="width: 50px;"/></h3>

<p>Cada component ha de ser <strong>el més autònom possible</strong>, podent funcionar encara que la resta no estiguin disponibles. Aquesta tolerància a fallides és clau per a l&rsquo;èxit d&rsquo;una aplicació amb una arquitectura distribuïda. S&rsquo;han d&rsquo;evitar punts crítics que suposin la caiguda (downtime) de tota l&rsquo;aplicació.</p>

<h3 id="desacoblament-de-les-dades-img-src-images-bloc-cloud-ready-decoupled-png-alt-desacoblament-style-width-60px">Desacoblament de les dades <img src="/images/bloc/cloud-ready-decoupled.png" alt="Desacoblament" style="width: 60px;"/></h3>

<p>El <strong>processament de les dades, i les mateixes dades, han d&rsquo;estar en components separats</strong>. Un cop desacoblats, és possible tenir les dades en un CPD privat i fer-ne el processament en un cloud públic o privat. Aquesta és una pràctica habitual en empreses i organitzacions que volen tenir les dades en els seus servidors però aprofitar els avantatges que proporciona el cloud.</p>

<h3 id="emmagatzemament-local-img-src-images-bloc-cloud-ready-storage-jpg-alt-emmagatzemament-style-width-80px">Emmagatzemament local <img src="/images/bloc/cloud-ready-storage.jpg" alt="Emmagatzemament" style="width: 80px;"/></h3>

<p>En un entorn Cloud <strong>els fitxers que escriu l&rsquo;aplicació al sistema de fitxers local són volàtils</strong>. Per exemple, suposant que l&rsquo;aplicació utilitza el sistema de fitxers local com a caché, en aturar-se un node i aixecar-se posteriorment en una altra ubicació (màquina física, VM, &hellip;), aquesta caché desapareixerà, el que suposarà que el temps de resposta serà diferent dels altres nodes on si existeix aquesta caché. El que es recomana és utilitzar un repositori extern com pugui ser una base de dades SQL o NoSQL.</p>

<p>Un altre aspecte a tenir en compte és la lectura de fitxers de configuració de l&rsquo;aplicació. Aquests han de ser idèntics en tots els nodes, ja que en cas contrari el resultat pot ser inesperat.</p>

<h3 id="seguretat-img-src-images-bloc-cloud-ready-security-png-alt-seguretat-style-width-80px">Seguretat <img src="/images/bloc/cloud-ready-security.png" alt="Seguretat" style="width: 80px;"/></h3>

<h4 id="stateless">Stateless</h4>

<p>Per tal que una aplicació no es vegi afectada per un escalat dinàmic (canvi del nombre d&rsquo;instàncies en calent) cal que sigui &ldquo;stateless&rdquo;, és a dir, <strong>no mantingui l&rsquo;estat en la mateixa aplicació</strong>. Una possibilitat és emmagatzemar part de l&rsquo;estat en el navegador en aplicacions web modernes utilitzant funcionalitats d&rsquo;HTML5, encara que el més habitual és utilitzar un repositori centralitzat en el servidor (Redis, per exemple). No ha d&rsquo;utilitzar-se l&rsquo;HTTPSession en Java, o session[] hash a Ruby on Rails, donat que llavors estem emmagatzemant l&rsquo;estat dins la pròpia aplicació, fet que volem evitar. La solució implica utilitzar un repositori amb alta disponibilitat extern a l&rsquo;aplicació com pugui ser Redis o Memcached.</p>

<h3 id="interoperabilitat-img-src-images-bloc-cloud-ready-interoperability-png-alt-interoperability-style-width-60px">Interoperabilitat  <img src="/images/bloc/cloud-ready-interoperability.png" alt="Interoperability" style="width: 60px;"/></h3>

<h4 id="protocols-moderns-i-estàndards">Protocols moderns i estàndards</h4>

<p>L&rsquo;aplicació ha d&rsquo;utilitzar protocols moderns, preferiblement <strong>REST sobre HTTP(s)</strong>, o inclús SOAP i WS-* estàndards. Per tant, cal evitar l&rsquo;ús de protocols com per exemple RMI-IIOP ja en desús des de fa força temps.</p>

<h4 id="optimització-de-la-comunicació-entre-components">Optimització de la comunicació entre components</h4>

<p>Per tal que una aplicació tingui un bon rendiment, cal pensar molt bé quina és la manera més òptima per a comunicar els diferents components que en formen part. Per exemple, agrupant missatges en lloc d&rsquo;estar contínuament fent intercanvi d&rsquo;informació.</p>

<h3 id="devops-img-src-images-bloc-cloud-ready-devops-jpg-alt-devops-style-width-60px">DevOps <img src="/images/bloc/cloud-ready-devops.jpg" alt="DevOps" style="width: 60px;"/></h3>

<h4 id="configuració-automatització">Configuració/Automatització</h4>

<p>És molt important que els equips de desenvolupament i operacions es posin d&rsquo;acord en com ha de ser la configuració de l&rsquo;aplicació per a poder ser desplegada en els diferents entorns i aquest procés de desplegament pugui automatitzar-se (DevOps). Per assolir aquest objectiu cal definir <strong>convencions</strong> i documentar com han de ser aquestes configuracions per tal que no hi hagi divergències que puguin dificultar la tasca.</p>

<h4 id="monitorització">Monitorització</h4>

<p>L&rsquo;aplicació ha de poder ser monitoritzada. No ha de ser necessari tenir coneixements (interpretar logs) de l&rsquo;aplicació per a poder determinar si aquesta està funcionant correctament o no. Per tant, han d&rsquo;existir <strong>mètriques i sondes (health check URL) tècniques</strong>, no funcionals, que permetin saber si l&rsquo;estat de l&rsquo;aplicació és correcte. Per exemple, una URL que retorni el codi HTTP 200 en cas satisfactori o un codi diferent altrament.</p>

<h4 id="traçabilitat">Traçabilitat</h4>

<p>L&rsquo;aplicació no ha d&rsquo;escriure els logs a un fitxer local. Cal recordar que els nodes han de poder aturar-se i reiniciar-se sense que l&rsquo;aplicació es vegi afectada. En cas que els logs s&rsquo;escriguin en el sistema de fitxers local aquesta informació es perdrà.</p>

<p>En entorns cloud s&rsquo;acostuma a utilitzar un servei extern que funciona com a <strong>agregador de logs</strong>. D&rsquo;aquesta manera els logs persistiran encara que els nodes de l&rsquo;aplicació s&rsquo;eliminin. Donat que la transmissió de logs es fa per la xarxa, cal anar amb compte amb el nivell de log (error, warn, info, debug, trace) configurat en entorns productius, ja que pot produïr un problema de saturació en cas que estigui configurat a un nivell de detall molt alt. El volum de logs ha de ser manegable.</p>

<h2 id="canigó">Canigó</h2>

<p>Es preveu una evolució del framework Canigó durant finals d&rsquo;aquest any i 2017 en aquesta línia, per tal de facilitar el màxim possible el seu desplegament en entorns Cloud.</p>

<p><br /></p>

<p><strong>Referències</strong>:</p>

<ul>
<li><a href="http://blog.octo.com/en/cloud-ready-applications/">http://blog.octo.com/en/cloud-ready-applications/</a></li>
<li><a href="http://www.ibm.com/developerworks/websphere/techjournal/1404_brown/1404_brown.html">http://www.ibm.com/developerworks/websphere/techjournal/1404_brown/1404_brown.html</a></li>
<li><a href="http://techbeacon.com/5-steps-building-cloud-ready-application-architecture">http://techbeacon.com/5-steps-building-cloud-ready-application-architecture</a></li>
</ul>


					

					
						<a name="comments"></a>
						<hr />		
						<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'arquitectura-ctti';
    var disqus_identifier = 'http:\/\/canigo.ctti.gencat.cat\/bloc\/2016\/09\/cloud-ready\/';
    var disqus_title = 'Cloud-Ready';
    var disqus_url = 'http:\/\/canigo.ctti.gencat.cat\/bloc\/2016\/09\/cloud-ready\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
					
				</div>	

			</article>	


	</section>	

		<div class="fons_footer ">
		<footer class="container center-block shadowBox2">
			<div class="shadow2"></div>
			<div class="row footer_tab_ord">

				<div class="footer_tab_bot col-sm-12">
					<div class="avis_legal">

						<div id="fAvisLegal">
							<div>
								<div class="hidden-xs">
									<a href="http://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" alt="www.gencat.cat"
										/></a>
									<p>
										<a title="Avis legal" href="http://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								<div class="visible-xs avis_legal">
									<p>
										<a title="Avis legal" href="http://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								
								<div class="fi_peu visible-xs">
									<a title="www.gencat.cat" href="http://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" 
										alt="www.gencat.cat" /></a> <a class="torna_amunt pull-right"
										href=" javascript:tornarAmunt();" title="Torna amunt">
										<p>Torna amunt</p>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

<script src="/js/master.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<script src="/js/custom.js" type="text/javascript"></script>



<script type="text/javascript">

if(location.hostname!=="localhost"){

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', "UA-59408075-1", 'auto');
	ga('send', 'pageview', {
	  	'page': location.pathname + location.search  + location.hash
	  }
	);

}

</script>



</body>
</html>
